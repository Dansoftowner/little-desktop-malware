package com.littlemalware

import javafx.beans.property.IntegerProperty
import javafx.geometry.Insets
import javafx.scene.Scene
import javafx.scene.control.Label
import javafx.scene.layout.StackPane
import javafx.stage.Stage
import kotlin.random.Random
import javafx.stage.Screen.getPrimary as screen

class LittleWindow(count: IntegerProperty) : Stage() {

    init {
        title = "HIiiii:)))"
        scene = Scene(Content())
        setOnCloseRequest {
            for (i in 0..count.get()) {
                val lw = LittleWindow(count)
                lw.x = randomXPos()
                lw.y = randomYPos()
                lw.show()
            }
            count.set(count.get() + 1)
        }
    }

    private fun randomXPos() = Random.nextInt(
        screen().bounds.minX.toInt(),
        screen().bounds.maxX.toInt()
    ).toDouble()

    private fun randomYPos() = Random.nextInt(
        screen().bounds.minY.toInt(),
        screen().bounds.maxY.toInt()
    ).toDouble()

    private class Content : StackPane() {
        init {
            padding = Insets(50.0)
            children.addAll(
                Label("HIIII :))))")
            )
        }
    }
}